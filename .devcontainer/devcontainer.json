{
  "name": "Custom Coder Dev Container",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu",

  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "upgradePackages": false
    },
    "ghcr.io/devcontainers/features/node:1": {
      "version": "22.20.0"
    }
  },
  "postCreateCommand": "sudo apt-get update && sudo apt-get install -y curl && curl -fsSL https://code-server.dev/install.sh | sh",
  "postStartCommand": "code-server --auth none --port 13337 &",
  "customizations": {
    "coder": {
      "apps": [
        {
          "name": "code-server",
          "port": 13337,
          "icon": "/icon/code.svg",
          "health": {
            "url": "http://localhost:13337/healthz"
          }
        }
      ]
    }
  }
}